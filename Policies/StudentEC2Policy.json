{
  "Version": "2012-10-17",
  "Statement": [
      {
          "Effect": "Allow",
          "Action": [
              "ec2:Describe*",
              "ec2:GetConsole*",
              "cloudwatch:DescribeAlarms"
          ],
          "Resource": "*"
      },
      {
          "Sid": "CreateInstance",
          "Effect": "Allow",
          "Action": [
              "ec2:RunInstances"
          ],
          "Resource": [
              "arn:aws:ec2:*:*:subnet/*",
              "arn:aws:ec2:*:*:network-interface/*",
              "arn:aws:ec2:*:*:instance/*",
              "arn:aws:ec2:*:*:volume/*",
              "arn:aws:ec2:*::image/ami-*",
              "arn:aws:ec2:*:*:key-pair/*",
              "arn:aws:ec2:*:*:security-group/*",
              "arn:aws:cloudwatch:*:538493143704:alarm:*"
          ],
          "Condition": {
              "StringLikeIfExists": {
                  "ec2:InstanceType": [
                      "t2.micro"
                  ]
              }
          }
      },
      {
          "Sid": "AllowToViewRoles",
          "Effect": "Allow",
          "Action": [
              "iam:PassRole",
              "iam:ListInstanceProfiles"
          ],
          "Resource": "*"
      },
      {
          "Sid": "ManagingExistingInstance",
          "Effect": "Allow",
          "Action": [
              "ec2:TerminateInstances",
              "ec2:StopInstances",
              "ec2:StartInstances"
          ],
          "Resource": "*"
      },
      {
        "Sid": "AllowToCreateKeyPair",
        "Effect": "Allow",
        "Action": [
          "ec2:CreateKeyPair"
          ],
        "Resource": "*"
      },
      {
        "Sid": "ManageKeyPairs",
        "Effect": "Allow",
        "Action": [
          "ec2:DeleteKeyPair"
        ],
        "Resource": "*"
      },
      {
          "Sid": "AllowCreationOfSecurityGroups",
          "Effect": "Allow",
          "Action": [
              "ec2:AuthorizeSecurityGroupEgress",
              "ec2:AuthorizeSecurityGroupIngress",
              "ec2:CreateSecurityGroup",
              "ec2:DeleteSecurityGroup",
              "ec2:DescribeInstanceAttribute",
              "ec2:DescribeInstanceStatus",
              "ec2:DescribeInstances",
              "ec2:DescribeNetworkAcls",
              "ec2:DescribeSecurityGroups",
              "ec2:RevokeSecurityGroupEgress",
              "ec2:RevokeSecurityGroupIngress"
          ],
          "Resource": [
              "*"
          ]
      },
      {
          "Sid": "AllowViewOfCreatedSecurityGroups",
          "Effect": "Allow",
          "Action": [
              "ec2:DescribeSecurityGroups",
              "ec2:DescribeSecurityGroupReferences",
              "ec2:DescribeStaleSecurityGroups",
              "ec2:DescribeVpcs"
          ],
          "Resource": "*"
      }
  ]
}